{"version":3,"file":"useReadPersonalData.js","sourceRoot":"","sources":["../src/useReadPersonalData.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAC5C,OAAO,EACL,sBAAsB,EACtB,YAAY,EAEZ,KAAK,GAEN,MAAM,iBAAiB,CAAC;AAEzB,MAAM,CAAC,MAAM,mBAAmB,GAAG,GAAG,EAAE;IACtC,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;IACzC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAiB;QACjD,KAAK,EAAE,KAAK,CAAC,IAAI;QACjB,KAAK,EAAE,SAAS;QAChB,KAAK,EAAE,SAAS;KACjB,CAAC,CAAC;IAEH,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,YAAY;YAAE,OAAO;QAC1B,iCAAiC;QACjC,MAAM,YAAY,GAAG,YAAY,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,KAAK,EAAE,EAAE;YACxE,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;YACrC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,iDAAiD;QACpE,CAAC,CAAC,CAAC;QAEH,iDAAiD;QACjD,OAAO,GAAG,EAAE;YACV,YAAY,CAAC,MAAM,EAAE,CAAC;QACxB,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC;IAEnB,MAAM,gBAAgB,GAAG,CAAC,EACxB,GAAG,EACH,GAAG,EACH,uBAAuB,GACC,EAAE,EAAE;QAC5B,sBAAsB,CAAC;YACrB,GAAG;YACH,GAAG;YACH,uBAAuB;SACxB,CAAC;aACC,IAAI,CAAC,CAAC,GAAW,EAAE,EAAE;YACpB,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,4BAA4B;YAC5C,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACzB,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,KAAc,EAAE,EAAE;YACxB,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;IACP,CAAC,CAAC;IAEF,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,gBAAgB,EAAE,CAAC;AAC7C,CAAC,CAAC","sourcesContent":["import { useEffect, useState } from \"react\";\nimport {\n  readPersonalDataNative,\n  eventEmitter,\n  NFCReaderState,\n  State,\n  ReadPersonalDataOptions,\n} from \"./RNGKNFCReader\";\n\nexport const useReadPersonalData = () => {\n  const [result, setResult] = useState(\"\");\n  const [state, setState] = useState<NFCReaderState>({\n    state: State.idle,\n    value: undefined,\n    error: undefined,\n  });\n\n  useEffect(() => {\n    if (!eventEmitter) return;\n    // Subscribe to the event emitter\n    const subscription = eventEmitter.addListener(\"onStatusChange\", (event) => {\n      console.log(\"State updated:\", event);\n      setState(event); // Update the local state with the received event\n    });\n\n    // Clean up the subscription on component unmount\n    return () => {\n      subscription.remove();\n    };\n  }, [eventEmitter]);\n\n  const readPersonalData = ({\n    can,\n    pin,\n    checkBrainpoolAlgorithm,\n  }: ReadPersonalDataOptions) => {\n    readPersonalDataNative({\n      can,\n      pin,\n      checkBrainpoolAlgorithm,\n    })\n      .then((res: string) => {\n        setResult(res); // Store the result in state\n        console.log(\"success\");\n      })\n      .catch((error: unknown) => {\n        console.log(\"error\", error);\n      });\n  };\n\n  return { result, state, readPersonalData };\n};\n"]}